<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns="http://www.w3.org/TR/REC-html40"><head>


<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link rel="File-List" href="http://www.di.ens.fr/%7Ejosef/mva/assignment2/index_files/filelist.xml">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
b\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Assignment 2</title>
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"Times New Roman";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Courier New";
	panose-1:2 7 3 9 2 2 5 2 4 4;}
@font-face
	{font-family:Courier;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{text-indent:0pt;
	margin-left:0pt;
	margin-right:0pt;
	margin-top:0pt;
	margin-bottom:0pt;
	text-align:left;
	font-family:"Times New Roman";
	font-size:12.0pt;
	color:black;}
h2
	{text-indent:0pt;
	margin-left:0pt;
	margin-right:0pt;
	margin-top:0pt;
	margin-bottom:14.0pt;
	text-align:left;
	font-family:"Times New Roman";
	font-size:24.0pt;
	color:black;
	font-weight:bold;}
h3
	{text-indent:0pt;
	margin-left:0pt;
	margin-right:0pt;
	margin-top:0pt;
	margin-bottom:14.0pt;
	text-align:left;
	font-family:"Times New Roman";
	font-size:14.0pt;
	color:black;
	font-weight:bold;}
ol
	{margin-top:0in;
	margin-bottom:0in;
	margin-left:.25in;}
ul
	{margin-top:0in;
	margin-bottom:0in;
	margin-left:.25in;}
@page
	{size:8.2673in 11.6923in;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="3075" fill="f" fillcolor="white [7]"
  strokecolor="black [0]">
  <v:fill color="white [7]" color2="white [7]" on="f"/>
  <v:stroke color="black [0]" color2="white [7]">
   <o:left v:ext="view" color="black [0]" color2="white [7]"/>
   <o:top v:ext="view" color="black [0]" color2="white [7]"/>
   <o:right v:ext="view" color="black [0]" color2="white [7]"/>
   <o:bottom v:ext="view" color="black [0]" color2="white [7]"/>
   <o:column v:ext="view" color="black [0]" color2="white [7]"/>
  </v:stroke>
  <v:shadow color="#ccc [4]"/>
  <v:textbox inset="2.88pt,2.88pt,2.88pt,2.88pt"/>
  <o:colormenu v:ext="edit" fillcolor="blue [1]" strokecolor="black [0]"
   shadowcolor="#ccc [4]"/>
 </o:shapedefaults><o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head><body style="margin: 0pt;" bgcolor="white" vlink="#6633cc" link="#0066ff">

<div style="position: absolute; width: 8.2833in; height: 41.9159in;">
<!--[if gte vml 1]><![if mso | ie]><v:shapetype id="_x0000_t201" coordsize="21600,21600"
 o:spt="201" path="m,l,21600r21600,l21600,xe">
 <v:stroke joinstyle="miter"/>
 <v:path shadowok="f" o:extrusionok="f" strokeok="f" fillok="f" o:connecttype="rect"/>
 <o:lock v:ext="edit" shapetype="t"/>
</v:shapetype><v:shape id="_x0000_s1026" type="#_x0000_t201" style='position:absolute;
 left:4.25pt;top:11.33pt;width:579.68pt;height:3005.52pt;z-index:5;
 mso-wrap-distance-left:2.88pt;mso-wrap-distance-top:2.88pt;
 mso-wrap-distance-right:2.88pt;mso-wrap-distance-bottom:2.88pt;
 mso-position-horizontal:absolute' stroked="f" strokecolor="black [0]"
 insetpen="t" o:cliptowrap="t">
 <v:stroke color2="white [7]">
  <o:left v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:top v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:right v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:bottom v:ext="view" color="black [0]" color2="white [7]" weight="0"/>
  <o:column v:ext="view" color="black [0]" color2="white [7]"/>
 </v:stroke>
 <v:shadow color="#ccc [4]"/>
 <o:lock v:ext="edit" rotation="t"/>
 <v:textbox inset="0,0,0,0">
 </v:textbox>
</v:shape><![endif]><![endif]-->

<table v:shapes="_x0000_s1026" dir="ltr" style="width: 579.65pt; height: 3005.5pt; border-collapse: collapse; position: absolute; top: 11.3pt; left: 4.25pt; z-index: 5;" cellpadding="0" cellspacing="0" width="772" height="4007">
 <tbody><tr>
  <td style="width: 579.65pt; height: 2991.7pt;" valign="top" width="772" height="3988">
  <h2><span style="">MVA 2008 - 2009</span></h2>
  <h2><span style="">Object recognition and computer vision </span></h2>
  <h2><span style="">Assignment 2: Stitching photo mosaics</span></h2>
  <h3><span style="font-size: 16pt;">Jean Ponce, Cordelia Schmid and Josef Sivic</span></h3>
  <h3><span style="font-size: 16pt;">Due date: November 18th 2008</span></h3>
  <h3><span style="font-size: 12pt;">(adapted from Alyosha Efros, CMU, Svetlana Lazebnik, UNC, and Andrew Zisserman, Oxford)</span></h3>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">The
goal of the assignment is to automatically stitch images acquired by a
panning camera into a mosaic as illustrated in figures 1 and 2 below.</span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt; text-align: center;"><!--[if gte vml 1]><v:rect id="_x0000_s1030" style='width:205.2mm;
   height:62.2mm;mso-position-horizontal:absolute' o:preferrelative="t"
   filled="f" fillcolor="white [7]" stroked="f" strokecolor="black [0]"
   insetpen="t" o:cliptowrap="t">
   <v:fill color2="white [7]"/>
   <v:stroke color2="white [7]">
    <o:left v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:top v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:right v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:bottom v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:column v:ext="view" color="black [0]" color2="white [7]"/>
   </v:stroke>
   <v:imagedata src="index_files/image294.emz" o:title=""/>
   <v:shadow color="#ccc [4]"/>
   <v:path o:extrusionok="f" insetpenok="f"/>
   <o:lock v:ext="edit" ungrouping="t" aspectratio="t" grouping="t"/>
  </v:rect><![endif]--><!--[if !mso & !vml]--><img src="Assignment%202_files/image2941.gif" width="775" height="235"><!--[endif]--><span style="">Fig.1: Three images acquired by a panning camera.</span></p>
  <p class="MsoNormal" style="text-align: center;"><!--[if gte vml 1]><v:rect
   id="_x0000_s1029" style='width:138.484mm;height:77.28556mm;
   mso-position-horizontal:absolute' o:preferrelative="t" filled="f"
   fillcolor="white [7]" stroked="f" strokecolor="black [0]" insetpen="t"
   o:cliptowrap="t">
   <v:fill color2="white [7]"/>
   <v:stroke color2="white [7]">
    <o:left v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:top v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:right v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:bottom v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:column v:ext="view" color="black [0]" color2="white [7]"/>
   </v:stroke>
   <v:imagedata src="index_files/image297.emz" o:title=""/>
   <v:shadow color="#ccc [4]"/>
   <v:path o:extrusionok="f" insetpenok="f"/>
   <o:lock v:ext="edit" ungrouping="t" aspectratio="t" grouping="t"/>
  </v:rect><![endif]--><!--[if !mso & !vml]--><img src="Assignment%202_files/image2971.gif" width="523" height="292"><!--[endif]--></p>
  <p class="MsoNormal" style="margin-bottom: 14pt; text-align: center;"><span style="">Fig.2: Images stitched to a mosaic.</span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt; text-align: center;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <h3><span style="font-size: 16pt;">Algorithm outline:</span></h3>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 28.25pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">1.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="">Choose one image as the reference frame. </span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 28.25pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">2.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="">Estimate
homography between each of the remaining images and the reference
image. To estimate homography between two images use the following
procedure:</span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">a.</span><span style="width: 21.25pt;">&nbsp;</span><!--[endif]--><span style="">Detect local features in each image. </span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">b.</span><span style="width: 19.75pt;">&nbsp;</span><!--[endif]--><span style="">Extract feature descriptor for each feature point.</span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">c.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="">Match feature descriptors between two images.&nbsp; </span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">d.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="">Robustly estimate homography using RANSAC.</span></p>
  <p class="MsoNormal" style="margin-bottom: 7pt;"><span style="">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Warp each image into the reference frame and composite warped images into a single mosaic.</span></p>
  <h3><span style="font-size: 16pt;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 16pt;">Tips and detailed description of the algorithm:</span></h3>
  <p class="MsoNormal"><span style="">The algorithm will be described on the example of stitching images shown in figure 1.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 28.25pt; margin-bottom: 14pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">1.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Choosing the reference image. </span><span style="">Choosing
the middle image of the sequence as the reference frame is the
preferred option, as it will result in mosaics with less distortion.
However, you can choose any image of the sequence as the reference
frame. If you choose image 1 or 3 as the reference frame, directly
estimating homography between images 1 and 3, will be difficult as they
have very small overlap. To deal with this issue, you might have to
“chain” homographies, e.g. H</span><sub><span style=""><span dir="ltr"></span>13</span></sub><span style=""> = H</span><sub><span style=""><span dir="ltr"></span>12 *</span></sub><span style=""> H</span><sub><span style=""><span dir="ltr"></span>23</span></sub><span style="">.</span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 28.25pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">2.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Estimating homography.</span><span style=""> </span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">a.</span><span style="width: 21.25pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Detect local features in each image.</span><span style=""> Use your feature detector from assignment 1. You can also use function </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment2/harris.m">harris.m</a></span><span style=""> by A. Efros implementing a simple single scale Harris corner detector.</span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">b.</span><span style="width: 19.75pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Extract feature descriptor for each feature point.</span><span style="">&nbsp; Implement feature descriptor extraction outlined in Section 4 of the paper&nbsp;</span><span style="color: blue; text-decoration: underline;"><a href="http://graphics.cs.cmu.edu/courses/15-463/2007_fall/Papers/MOPS.pdf">“Multi-Image Matching using Multi-Scale Oriented Patches” by Brown et al.</a></span><span style="">
&nbsp;Don’t worry about rotation-invariance – just extract axis-aligned
8x8 patches.&nbsp;&nbsp;Note that it’s important to sample these
patches from the larger 40x40 window to have a nice large blurred
descriptor.&nbsp;Don’t forget to bias/gain-normalize the descriptors.
Ignore the Haar wavelet transform section</span><span style="font-size: 9.75pt;">.</span><span style="font-size: 10pt;"> </span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Courier New&quot;; font-size: 12pt; color: black;">c.</span><span style="width: 15.25pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Match feature descriptors between two images.</span><span style="">&nbsp; Implement Feature Matching (Section 5 in </span><span style="color: blue; text-decoration: underline;"><a href="http://graphics.cs.cmu.edu/courses/15-463/2007_fall/Papers/MOPS.pdf">“Multi-Image Matching using Multi-Scale Oriented Patches” by Brown et al.</a></span><span style="">).
That is, you will need to find pairs of features that look similar and
are thus likely to be in correspondence. We will call this set of
matched features “tentative” correspondences. You may
find&nbsp;function </span><span style="color: blue; text-decoration: underline;"><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment2/dist2.m">dist2.m</a></span><span style="">&nbsp;useful
for distance computations. For thresholding, use the simpler approach
due to Lowe of thresholding on the ratio between the first and the
second nearest neighbors. Consult Figure 6b in the paper for picking
the threshold.&nbsp;&nbsp;Ignore Section 6 on fast Wavelet indexing.
You can visualize the tentative correspondences between two images by
displaying the feature displacements. For example, to visualize
tentative correspondences between image 1 and 2: (i) show image 1, (ii)
show detected&nbsp; features in image 1 (display only region centers as
points, do not worry about the regions’ scale), (iii) show
displacements between detected features in image 1 and matched features
in image 2 by line segments. This is illustrated in figure 3 and&nbsp;
can be achieved using the following matlab code, where </span><span style="font-family: &quot;Courier New&quot;;">im1_pts</span><span style=""> and </span><span style="font-family: &quot;Courier New&quot;;">im2_pts</span><span style=""> are 2-by-n matrices holdin (x,y) image locations of tentatively corresponding features in image 1 and image 2, respectively:</span></p>
  <p class="MsoNormal" style="margin-left: 28.1pt; margin-bottom: 7pt;"><span style="font-family: &quot;Courier New&quot;;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-left: 84.15pt; margin-bottom: 14pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">figure; clf; imagesc(im1rgb); hold on;</span></p>
  <p class="MsoNormal" style="margin-left: 84.15pt; margin-bottom: 7pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">% show features detected in image 1</span></p>
  <p class="MsoNormal" style="margin-left: 84.15pt; margin-bottom: 14pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">plot(im1_pts(1,:),im1_pts(2,:),'+g'); </span></p>
  <p class="MsoNormal" style="margin-left: 84.15pt; margin-bottom: 7pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">% show displacements</span></p>
  <p class="MsoNormal" style="margin-left: 84.15pt; margin-bottom: 7pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">line([im1_pts(1,:); im2_pts(1,:)],[im1_pts(2,:); im2_pts(2,:)],'color','y') </span></p>
  <p class="MsoNormal" style="margin-left: 28.1pt; margin-bottom: 7pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 56.45pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">d.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Robustly estimate homography using RANSAC.</span><span style=""> Use a sample of 4-points to compute each homography hypothesis. You will need to write a function of the form:</span></p>
  <p class="MsoNormal"><span style="">&nbsp;</span></p>
  <p class="MsoNormal" style="text-align: center;"><span style="font-size: 10pt; font-family: Courier;">H = computeH(im1_pts,im2_pts)</span></p>
  <p class="MsoNormal"><span style="font-size: 10pt;">&nbsp;</span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 7pt;"><span style="">where,
again,&nbsp;im1_pts&nbsp;and&nbsp;im2_pts&nbsp;are 2-by-n matrices
holding the (x,y) locations of n(=4) point correspondences from the two
images and H is the recovered 3x3 homography matrix.&nbsp;&nbsp;In
order to compute the entries in the matrix H, you will need to set up a
linear system of n equations (i.e. a matrix equation of the form&nbsp;</span><span style="font-weight: bold;">Ah=0</span><span style="">&nbsp;where h is a vector holding the 8 unknown entries of H).&nbsp;&nbsp;The solution to the homogeneous least squares system </span><span style="font-weight: bold;">Ax=0</span><span style=""> is obtained from the SVD of A by the singular vector corresponding to the smallest singular value. In Matlab: </span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">[U,S,V]=svd(A); x = V(:,end);</span><span style="font-size: 10pt;">&nbsp; </span><span style="">For more details on homography estimation from point correspondences see a </span><span style=""><a href="http://www.cs.ucsd.edu/classes/wi07/cse252a/homography_estimation/homography_estimation.pdf">note written by David Kriegman</a></span><span style="">. Don’t forget to re-estimate the homography from all inlying points.&nbsp;&nbsp; </span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 7pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 7pt;"><span style="">For
RANSAC, a very simple implementation performing a fixed number of
sampling iterations is sufficient. You should output a single
transformation that gets the most inliers in the course of all the
iterations. For the various RANSAC parameters (number of iterations,
inlier threshold), play around with a few ``reasonable'' values and
pick the ones that work best. For randomly sampling matches, you can
use the&nbsp;Matlab </span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">randperm</span><span style="">&nbsp;function. You should display the set of inliers as illustrated in figure 3.&nbsp; </span></p>
  <p class="MsoNormal" style="margin-bottom: 7pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="text-indent: -28.25pt; margin-left: 28.25pt; margin-bottom: 7pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: &quot;Times New Roman&quot;; font-size: 12pt; color: black;">3.</span><span style="width: 19pt;">&nbsp;</span><!--[endif]--><span style="font-weight: bold;">Warping and compositing. </span><span style="">Warp
each image into the reference frame using the estimated homography and
composite warped images into a single mosaic.&nbsp; You can use the </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment2/vgg_warp_H.m">vgg_warp_H</a></span><span style=""> function for warping. Here is an example code to warp and composite images 1 and 2 :</span></p>
  <p class="MsoNormal" style="margin-left: 28pt; margin-bottom: 14pt;"><span style="">First,
define a mosaic image to warp all the images onto. Here we assume image
2 as the reference image, and map this image to the origin of the
mosaic image using the identity homography (</span><span style="font-family: &quot;Courier New&quot;;">eye(3)</span><span style=""> in Matlab).</span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 7pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">bbox = [-400 1200 -200 700] % image space for mosaic</span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 14pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">Im2w = vgg_warp_H(Im2, eye(3), ’linear’, bbox); % warp image 1 to mosaic image</span></p>
  <p class="MsoNormal" style="margin-left: 28pt; margin-bottom: 14pt;"><span style="">Now warp image 1 to a separate mosaic image using estimated homography H12 between image 1 and image 2</span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 14pt;"><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">Im1w = vgg_warp_H(Im1, H12, ’linear’, bbox);</span></p>
  <p class="MsoNormal" style="margin-left: 28pt; margin-bottom: 14pt;"><span style="">and
finally combine the mosaic images by taking the pixel with maximum
value from each image. This tends to produce less artefacts than taking
the average of warped images.</span></p>
  <p class="MsoNormal" style="margin-left: 56.15pt; margin-bottom: 14pt;"><span style="">i</span><span style="font-size: 10pt; font-family: &quot;Courier New&quot;;">magesc(double(max(Im1w,Im2w))/255);</span></p>
  <p class="MsoNormal" style="margin-left: 28pt; margin-bottom: 14pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <h3 style="text-align: center;"><!--[if gte vml 1]><v:rect id="_x0000_s1028"
   style='width:97mm;height:69.89083mm;mso-position-horizontal:absolute'
   o:preferrelative="t" filled="f" fillcolor="white [7]" stroked="f"
   strokecolor="black [0]" insetpen="t" o:cliptowrap="t">
   <v:fill color2="white [7]"/>
   <v:stroke color2="white [7]">
    <o:left v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:top v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:right v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:bottom v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:column v:ext="view" color="black [0]" color2="white [7]"/>
   </v:stroke>
   <v:imagedata src="index_files/image299.emz" o:title=""/>
   <v:shadow color="#ccc [4]"/>
   <v:path o:extrusionok="f" insetpenok="f"/>
   <o:lock v:ext="edit" ungrouping="t" aspectratio="t" grouping="t"/>
  </v:rect><![endif]--><!--[if !mso & !vml]--><img src="Assignment%202_files/image2991.gif" width="366" height="264"><!--[endif]--><!--[if gte vml 1]><v:rect id="_x0000_s1027"
   style='width:96.734mm;height:69.69917mm;mso-position-horizontal:absolute'
   o:preferrelative="t" filled="f" fillcolor="white [7]" stroked="f"
   strokecolor="black [0]" insetpen="t" o:cliptowrap="t">
   <v:fill color2="white [7]"/>
   <v:stroke color2="white [7]">
    <o:left v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:top v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:right v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:bottom v:ext="view" color="black [0]" color2="white [7]" joinstyle="miter"
     insetpen="t"/>
    <o:column v:ext="view" color="black [0]" color2="white [7]"/>
   </v:stroke>
   <v:imagedata src="index_files/image301.emz" o:title=""/>
   <v:shadow color="#ccc [4]"/>
   <v:path o:extrusionok="f" insetpenok="f"/>
   <o:lock v:ext="edit" ungrouping="t" aspectratio="t" grouping="t"/>
  </v:rect><![endif]--><!--[if !mso & !vml]--><img src="Assignment%202_files/image3011.gif" width="365" height="263"><!--[endif]--></h3>
  <p class="MsoNormal" style="text-align: center;"><span style="">Fig.
3: Visualization of tentative correspondences (left) and homography
inliers (right). Detected points are shown in green. Feature
displacements are shown by yellow lines.&nbsp; </span></p>
  <h3><span style="font-size: 16pt;"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 16pt;">Test images</span></h3>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">Here are the </span><span style=""><a href="http://www.di.ens.fr/%7Ejosef/mva/assignment2/keble.zip">three images</a></span><span style="">
from figure 1. Also run your code on a new set of at least two
homography related images, which you capture yourself using a digital
camera or download from the Internet.&nbsp; To capture the images,
shoot from the same point of view but with different view directions,
and with overlapping fields of view. Make sure the images have enough
overlap (e.g. at least 40%). Another way to do this is to shoot
pictures of a planar surface (e.g. a wall) from different points of
view. </span></p>
  <h3><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 16pt;">What to hand in</span></h3>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">You should prepare a (very brief) report including the following: </span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">The final mosaic of the provided test images (similar to figure 2).</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Visualization of the set of tentative matches and the set of inliers for one image pair (similar to figure 3). </span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Give
the parameter values you have used (e.g. the threshold for descriptor
matching, number of iterations and the inlier threshold for RANSAC). </span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Show the input images and the final mosaic for your new image set (see the Test images section above). </span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal" style="margin-bottom: 14pt;"><span style="">Send your report, code, and your additional test images in a single zip file to&nbsp; </span><span style="font-weight: bold;">Josef Sivic &lt;Josef.Sivic@ens.fr&gt;</span><span style="">.</span></p>
  <h3><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></h3>
  <h3><span style="font-size: 13.5pt;">Helpful </span><span style="">resources</span></h3>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Nice </span><span style=""><a href="http://graphics.cs.cmu.edu/courses/15-463/2007_fall/Lectures/mosaic.ppt">Slides</a></span><span style=""> by Alyosha Efros on mosaicing.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">A note on </span><span style=""><a href="http://www.cs.ucsd.edu/classes/wi07/cse252a/homography_estimation/homography_estimation.pdf">computing homography</a></span><span style=""> by David Kriegman.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">Another note on </span><span style=""><a href="http://www.cse.iitd.ac.in/%7Esuban/vision/geometry/node24.html">computing Homography</a></span><span style="">.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style=""><a href="http://www.cs.washington.edu/education/courses/cse576/05sp/papers/MSR-TR-2004-92.pdf">Tutorial on image alignment and stitching (draft)</a></span><span style=""> by Richard Szeliski.</span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">M. Brown, R. Szeliski and S. Winder. </span><span style=""><a href="http://www.cs.ubc.ca/%7Embrown/papers/cvpr05.pdf">Multi-Image Matching using Multi-Scale Oriented Patches</a></span><span style="">.&nbsp;</span><span style="font-style: italic;">International Conference on Computer Vision and Pattern Recognition (CVPR2005)</span><span style="">, pages 510-517&nbsp; </span></p>
  <p class="MsoNormal" style="text-indent: -18pt; margin-left: 18pt;"><!--[if !supportLists]--><span style="direction: ltr; unicode-bidi: embed; font-family: Symbol; font-size: 12pt; color: black;">·</span><span style="width: 12.75pt;">&nbsp;</span><!--[endif]--><span style="">A
comprehensive treatment of homography estimation can be found in
chapter 4 of Multiple View Geometry in Computer Vision by R. Hartley
and A. Zisserman, Cambridge University Press, 2004.</span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  </td>
 </tr>
 <tr>
  <td style="width: 579.65pt; height: 13.75pt;" valign="top" width="772" height="18">
  <p class="MsoNormal"><span style=""><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--></span></p>
  </td>
 </tr>
</tbody></table>


</div>

</body></html>